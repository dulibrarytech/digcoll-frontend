<% if(options.showDateRange) { %>
	<button class="accordion" alt="Date Range" name="Date-Range_collapsible">
		<h4>Date Range</h4><i class="fas fa-caret-right facet-caret"></i>
	</button>
	<div id="daterange-window" class="panel facet-panel panel-collapsed" style="display: none">
		<form id="daterange-form" class="" action="javascript:submitDateRange()">
			<div class="form-group">
				<label for="date-from">From:</label>
		        <input type="text" id="date-from" class="form-control sliderValue" name="from" title="Start Date" data-index="0" value="1500" />
		    </div>
		    <div class="form-group">
		    	<label for="date-to">To:</label>
		        <input type="text" id="date-to" class="form-control sliderValue" name="to" title="End Date" data-index="1" value="2020" />
		    </div>
		    <br />
		    <div id="slider"></div>
		    <br />
		    <button class="btn btn-default" type="submit">Set</button>
		</form>
	</div>
<% } %>

<script type="text/javascript">
	function submitDateRange() {
		var decoded = decodeURIComponent(window.location.href);
		var url = decoded.replace(/&from=[0-9]+&to=[0-9]+/g, "") + "&" + $("#daterange-form").serialize();
		window.location.assign(encodeURI(url));
	}
	function removeDateRange(from, to) {
		var searchUrl = decodeURIComponent(window.location.href);
		window.location.assign(encodeURI(searchUrl.replace(/&from=[0-9]+&to=[0-9]+/g, "")));
	}
</script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  	var dt = new Date();
  	var curYear = dt.getFullYear();
  	$(document).ready(function() {
	    $("#slider").slider({
	        min: 1500,
	        max: 2020,
	        step: 1,
	        values: [1500, 2020],
	        slide: function(event, ui) {
	            for (var i = 0; i < ui.values.length; ++i) {
	                $("input.sliderValue[data-index=" + i + "]").val(ui.values[i]);
	            }
	        }
	    });

	    $("input.sliderValue").change(function() {
	        var $this = $(this);
	        $("#slider").slider("values", $this.data("index"), $this.val());
	    });
	});
</script>