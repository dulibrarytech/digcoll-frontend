<div id="facets">
	<% for(var key in facets) { %>	
	  <button class="accordion">
	    <h5><%= key %></h5><i class="fas fa-caret-right facet-caret"></i>
	  </button>
	  <%- facets[key] %>
	<% } %>

	<script type="text/javascript">

		function selectFacet(facetType, facet) {

			// Url encode spaces for querystring
			facet = facet.replace(' ', '%20');

			// Get current search querystring
			var url = window.location.href;
			var searchUrl = "/" + url.substring(url.indexOf("repository"), url.length);
			var facetParam = "&f[" + facetType + "][]=" + facet;

			// Add the selected facet param to the search querystring, if it has not been added yet
			if(searchUrl.indexOf(facetParam) <= 0) {
				searchUrl += facetParam;
			}

			return searchUrl;
		};

		function removeFacet(facetType, facet) {

			// Get the facet param string to remove from the search querystring
			var facetParam = "&f[" + facetType + "][]=" + facet;
			facetParam = facetParam.replace(/\s/g, "%20");

			// Get current search querystring
			url = window.location.href;
			searchUrl = "/" + url.substring(url.indexOf("repository"), url.length);

			// Remove the selected facet param from the search querystring
			searchUrl = searchUrl.replace(facetParam, "");

			return searchUrl;
		};

	</script>


</div>