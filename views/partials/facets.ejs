<div id="facets">
	<% for(var key in facets) { %>	
	  <button class="accordion">
	    <h5><%= key %></h5><i class="fas fa-caret-right facet-caret"></i>
	  </button>
	  <%- facets[key] %>
	<% } %>

	<script type="text/javascript">

		function selectFacet(facetType, facet, baseUrl) {

			// Url encode spaces for querystring
			facet = facet.replace(' ', '%20');

			var searchUrl = window.location.href,
				facetParam = "&f[" + facetType + "][]=" + facet;

			if(searchUrl.indexOf("/search") > 0) {
				// Add the selected facet param to the search querystring, if it has not been added yet
				if(searchUrl.indexOf(facetParam) <= 0) {
					searchUrl += facetParam;
				}
			}
			else if(searchUrl.indexOf("/collection") > 0) {

				var pidIndex = (searchUrl.indexOf("/collection") + 12),
				    pid = searchUrl.substring(pidIndex);

				searchUrl = baseUrl + '/search?q=&collection=' + pid + facetParam;
			}
			else {
				console.log("Error selecting facet");
			}

			return searchUrl;
		};

		function removeFacet(facetType, facet, baseUrl) {

			// Get the facet param string to remove from the search querystring
			var facetParam = "&f[" + facetType + "][]=" + facet;
			facetParam = facetParam.replace(/\s/g, "%20");

			// Get current search querystring
			var searchUrl = window.location.href;

			// Remove the selected facet param from the search querystring
			searchUrl = searchUrl.replace(facetParam, "");

			return searchUrl;
		};

	</script>


</div>